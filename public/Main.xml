<Ui xmlns="http://www.blizzard.com/wow/ui/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\FrameXML\UI.xsd"
>
    <Script file="Interface.lua"/>
    <Script file="Helpers.lua"/>
    <Script file="Features/DanceWithMe/DanceWithMe.lua"/>
    <Script file="Features/Flirt/Flirt.lua"/>
    <Script file="Features/Seduce/Seduce.lua"/>
    <Script file="Features/GivePresent/GivePresent.lua"/>
    <Script file="Features/RandomPhrases/RandomPhrases.lua"/>
    <Script file="Features/Rude/Rude.lua"/>
    <Script file="Features/Battleshout/Battleshout.lua"/>
    <Script file="Features/Panic/Panic.lua"/>
    <Script file="Features/NurseNancy/NurseNancy.lua"/>
    <Script file="Features/NurseNancy/SpellIds.lua"/>
    <Script file="Features/AnsweringMachine/AnsweringMachine.lua"/>
    
    <Frame name="ExpressYourElf_Frame" toplevel="true" frameStrata="DIALOG" movable="false" enableMouse="true" hidden="true" parent="UIParent" clampedToScreen="true">
        <Scripts>
            <OnLoad>
                self:RegisterEvent("ADDON_LOADED");
                self:RegisterEvent("PLAYER_TARGET_CHANGED");
                self:RegisterForDrag("LeftButton");

                local dancingButton = CreateFrame("Button","dancingButton",ExpressYourElf_Frame, "SecureActionButtonTemplate,ActionButtonTemplate")
                dancingButton:SetScale(1)
                dancingButton:SetText("Dance")
                dancingButton:SetPoint("TOPLEFT", "ExpressYourElf_Frame", "TOPLEFT", 7, -7);
                dancingButton:SetPushedTexture("Interface\\Icons\\inv_misc_firedancer_01")
                dancingButton:SetHighlightTexture("Interface\\Icons\\inv_misc_firedancer_01")
                dancingButton:SetNormalTexture("Interface\\Icons\\inv_misc_firedancer_01")
                dancingButton:GetNormalTexture():SetAllPoints(dancingButton)
                dancingButton:SetToplevel(true)
                dancingButton:SetScript("OnClick",function()
                    ExpressYourElf.DanceWithMe.run()
                end)


                local randomButton = CreateFrame("Button","randomButton",ExpressYourElf_Frame, "SecureActionButtonTemplate,ActionButtonTemplate")
                randomButton:SetScale(1)
                randomButton:SetText("Random")
                randomButton:SetPoint("TOPLEFT", "ExpressYourElf_Frame", "TOPLEFT", 47, -7);
                randomButton:SetPushedTexture("Interface\\Icons\\ability_warrior_commandingshout")
                randomButton:SetHighlightTexture("Interface\\Icons\\ability_warrior_commandingshout")
                randomButton:SetNormalTexture("Interface\\Icons\\ability_warrior_commandingshout")
                randomButton:GetNormalTexture():SetAllPoints(randomButton)
                randomButton:SetToplevel(true)
                randomButton:SetScript("OnClick",function()
                    ExpressYourElf.RandomPhrases.run()
                end)


                local giftButton = CreateFrame("Button","giftButton",ExpressYourElf_Frame, "SecureActionButtonTemplate,ActionButtonTemplate")
                giftButton:SetScale(1)
                giftButton:SetPoint("TOPLEFT", "ExpressYourElf_Frame", "TOPLEFT", 87, -47);
                giftButton:SetPushedTexture("Interface\\Icons\\item_shop_giftbox01")
                giftButton:SetHighlightTexture("Interface\\Icons\\item_shop_giftbox01")
                giftButton:SetNormalTexture("Interface\\Icons\\item_shop_giftbox01")
                giftButton:GetNormalTexture():SetAllPoints(giftButton)
                giftButton:SetText("Gift")
                giftButton:SetAlpha(.3)
                giftButton:Disable()
                giftButton:SetToplevel(true)
                giftButton:SetScript("OnClick",function()
                    ExpressYourElf.GivePresent.run()
                end)

                local flirtButton = CreateFrame("Button","flirtButton",ExpressYourElf_Frame, "SecureActionButtonTemplate,ActionButtonTemplate")
                flirtButton:SetScale(1)
                flirtButton:SetPoint("TOPLEFT", "ExpressYourElf_Frame", "TOPLEFT", 7, -47);
                flirtButton:SetPushedTexture("Interface\\Icons\\spell_shadow_seduction")
                flirtButton:SetHighlightTexture("Interface\\Icons\\spell_shadow_seduction")
                flirtButton:SetNormalTexture("Interface\\Icons\\spell_shadow_seduction")
                flirtButton:GetNormalTexture():SetAllPoints(flirtButton)
                flirtButton:SetText("Flirt")
                flirtButton:Disable()
                flirtButton:SetAlpha(.3)
                flirtButton:SetToplevel(true)
                flirtButton:SetScript("OnClick",function()
                    ExpressYourElf.Flirt.run()
                end)

                local seduceButton = CreateFrame("Button","seduceButton",ExpressYourElf_Frame, "SecureActionButtonTemplate,ActionButtonTemplate")
                seduceButton:SetScale(1)
                seduceButton:SetPoint("TOPLEFT", "ExpressYourElf_Frame", "TOPLEFT", 47, -47);
                seduceButton:SetPushedTexture("Interface\\Icons\\spell_shadow_summonsuccubus")
                seduceButton:SetHighlightTexture("Interface\\Icons\\spell_shadow_summonsuccubus")
                seduceButton:SetNormalTexture("Interface\\Icons\\spell_shadow_summonsuccubus")
                seduceButton:GetNormalTexture():SetAllPoints(seduceButton)
                seduceButton:SetText("Seduce")
                seduceButton:Disable()
                seduceButton:SetAlpha(.3)
                seduceButton:SetToplevel(true)
                seduceButton:SetScript("OnClick",function()
                    ExpressYourElf.Seduce.run()
                end)


                local rudeButton = CreateFrame("Button","rudeButton",ExpressYourElf_Frame, "SecureActionButtonTemplate,ActionButtonTemplate")
                rudeButton:SetScale(1)
                rudeButton:SetPoint("TOPLEFT", "ExpressYourElf_Frame", "TOPLEFT", 127, -47);
                rudeButton:SetPushedTexture("Interface\\Icons\\ability_demonhunter_torment")
                rudeButton:SetHighlightTexture("Interface\\Icons\\ability_demonhunter_torment")
                rudeButton:SetNormalTexture("Interface\\Icons\\ability_demonhunter_torment")
                rudeButton:GetNormalTexture():SetAllPoints(rudeButton)
                rudeButton:SetText("Rude")
                rudeButton:SetAlpha(.3)
                rudeButton:Disable()
                rudeButton:SetToplevel(true)
                rudeButton:SetScript("OnClick",function()
                    ExpressYourElf.IAmRude.run()
                end)

                local panicButton = CreateFrame("Button","panicButton",ExpressYourElf_Frame, "SecureActionButtonTemplate,ActionButtonTemplate")
                panicButton:SetScale(1)
                panicButton:SetText("Panic")
                panicButton:SetPoint("TOPLEFT", "ExpressYourElf_Frame", "TOPLEFT", 87, -7);
                panicButton:SetPushedTexture("Interface\\Icons\\spell_shadow_painandsuffering")
                panicButton:SetHighlightTexture("Interface\\Icons\\spell_shadow_painandsuffering")
                panicButton:SetNormalTexture("Interface\\Icons\\spell_shadow_painandsuffering")
                panicButton:GetNormalTexture():SetAllPoints(panicButton)
                panicButton:SetToplevel(true)
                panicButton:SetScript("OnClick",function()
                    ExpressYourElf.Panic.run()
                end)

                local battleshoutButton = CreateFrame("Button","battleshoutButton",ExpressYourElf_Frame, "SecureActionButtonTemplate,ActionButtonTemplate")
                battleshoutButton:SetScale(1)
                battleshoutButton:SetText("Battlecry")
                battleshoutButton:SetPoint("TOPLEFT", "ExpressYourElf_Frame", "TOPLEFT", 127, -7);
                battleshoutButton:SetPushedTexture("Interface\\Icons\\ability_warrior_battleshout")
                battleshoutButton:SetHighlightTexture("Interface\\Icons\\ability_warrior_battleshout")
                battleshoutButton:SetNormalTexture("Interface\\Icons\\ability_warrior_battleshout")
                battleshoutButton:GetNormalTexture():SetAllPoints(battleshoutButton)
                battleshoutButton:SetToplevel(true)
                battleshoutButton:SetScript("OnClick",function()
                    ExpressYourElf.Battleshout.run()
                end)

                ExpressYourElf_GiftButton = giftButton
                ExpressYourElf_RudeButton = rudeButton
                ExpressYourElf_FlirtButton = flirtButton
                ExpressYourElf_SeduceButton = seduceButton

                -- always on buttons
                ExpressYourElf_DancingButton = dancingButton
                ExpressYourElf_RandomButton = randomButton
                ExpressYourElf_PanicButton = panicButton
                ExpressYourElf_BattleshoutButtonn = battleshoutButton

                ExpressYourElf_Reset_Tooltips()
                
                local function eventHandler(self, event, arg1, ...)
                    if event == "ADDON_LOADED" and arg1 == "ExpressYourElf" then
                        if (ExpressYourElfVars.isShown == true) then
                            ExpressYourElf_Frame:Show()
                        else
                            ExpressYourElf_Frame:Hide()
                        end
                
                        ExpressYourElf_Frame:SetScale(ExpressYourElfVars.interfaceScale)
                        ExpressYourElf_Frame:ClearAllPoints(); 
                        ExpressYourElf_Frame:SetPoint(
                            ExpressYourElfVars.buttonFrame.position[1],
                            ExpressYourElfVars.buttonFrame.position[2],
                            ExpressYourElfVars.buttonFrame.position[3],
                            ExpressYourElfVars.buttonFrame.position[4],
                            ExpressYourElfVars.buttonFrame.position[5]
                        ); 
                    end
                    if event == "PLAYER_TARGET_CHANGED" and UnitName("target") and UnitPlayerControlled("target") then
                        ExpressYourElf_GiftButton:Enable()
                        ExpressYourElf_GiftButton:SetAlpha(1)
                        ExpressYourElf_RudeButton:Enable()
                        ExpressYourElf_RudeButton:SetAlpha(1)
                        ExpressYourElf_FlirtButton:Enable()
                        ExpressYourElf_FlirtButton:SetAlpha(1)
                        ExpressYourElf_SeduceButton:Enable()
                        ExpressYourElf_SeduceButton:SetAlpha(1)

                        ExpressYourElf_Reset_Tooltips()
                    elseif event == "PLAYER_TARGET_CHANGED" and UnitName("target") and UnitPlayerControlled("target") == false then
                        ExpressYourElf_GiftButton:Enable()
                        ExpressYourElf_GiftButton:SetAlpha(1)
                        ExpressYourElf_FlirtButton:Disable()
                        ExpressYourElf_FlirtButton:SetAlpha(.3)
                        ExpressYourElf_SeduceButton:Disable()
                        ExpressYourElf_SeduceButton:SetAlpha(.3)
                        ExpressYourElf_RudeButton:Disable()
                        ExpressYourElf_RudeButton:SetAlpha(.3)

                        ExpressYourElf_Reset_Tooltips()
                    else
                        ExpressYourElf_FlirtButton:Disable()
                        ExpressYourElf_FlirtButton:SetAlpha(.3)
                        ExpressYourElf_SeduceButton:Disable()
                        ExpressYourElf_SeduceButton:SetAlpha(.3)
                        ExpressYourElf_GiftButton:Disable()
                        ExpressYourElf_GiftButton:SetAlpha(.3)
                        ExpressYourElf_RudeButton:Disable()
                        ExpressYourElf_RudeButton:SetAlpha(.3)

                        ExpressYourElf_Reset_Tooltips()
                    end
                end
                ExpressYourElf_Frame:SetScript("OnEvent", eventHandler);
            </OnLoad>
            <OnDragStart>self:StartMoving();</OnDragStart>
            <OnDragStop>
                self:StopMovingOrSizing()
                
                local anchor,anchorTwo,anchorThree,x,y = self:GetPoint();
        
                ExpressYourElfVars.buttonFrame.position[1]=anchor;
                ExpressYourElfVars.buttonFrame.position[2]=anchorTwo;
                ExpressYourElfVars.buttonFrame.position[3]=anchorThree;
                ExpressYourElfVars.buttonFrame.position[4]=x;
                ExpressYourElfVars.buttonFrame.position[5]=y;
            </OnDragStop>
        </Scripts>
        <Size>
            <AbsDimension x="170" y="90"/>
        </Size>
        <Anchors>
            <Anchor point="CENTER"/>
            <Offset><AbsDimension x="0" y="0"/></Offset>
        </Anchors>
        <Layers>
            <Layer level="BACKGROUND">
              <Texture name="ExpressYourElf_Frame_BG" hidden="true" setAllPoints="true">
                <Color r="0.5" g="0.5" b="0" a="1" />
              </Texture> 
            </Layer>
        </Layers>
        <!-- <Backdrop bgFile="Interface\TutorialFrame\TutorialFrameBackground" edgeFile="Interface\DialogFrame\UI-Tooltip-Border" tile="true">
            <EdgeSize>
                <AbsValue val="16"/>
            </EdgeSize>
            <TileSize>
                <AbsValue val="32"/>
            </TileSize>
            <BackgroundInsets>
                <AbsInset left="5" right="5" top="5" bottom="5"/>
            </BackgroundInsets>
        </Backdrop> -->
    </Frame>
</Ui>
